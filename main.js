const _0x1d9ed3=_0x8c62;(function(_0x4cd176,_0x5258e4){const _0x358c63=_0x8c62,_0x59b80a=_0x4cd176();while(!![]){try{const _0x109fae=parseInt(_0x358c63(0xcf))/0x1+parseInt(_0x358c63(0xfd))/0x2*(parseInt(_0x358c63(0xcb))/0x3)+-parseInt(_0x358c63(0xfa))/0x4+-parseInt(_0x358c63(0x118))/0x5*(parseInt(_0x358c63(0xda))/0x6)+-parseInt(_0x358c63(0x104))/0x7*(parseInt(_0x358c63(0x109))/0x8)+parseInt(_0x358c63(0x11a))/0x9+parseInt(_0x358c63(0x10a))/0xa*(parseInt(_0x358c63(0x108))/0xb);if(_0x109fae===_0x5258e4)break;else _0x59b80a['push'](_0x59b80a['shift']());}catch(_0x5d2df2){_0x59b80a['push'](_0x59b80a['shift']());}}}(_0x3517,0xca87a),process[_0x1d9ed3(0xb4)][_0x1d9ed3(0xe3)]='0');import'./config.js';import{createRequire}from'module';import _0x18853e,{join}from'path';import{fileURLToPath,pathToFileURL}from'url';import{platform}from'process';import*as _0xef0b57 from'ws';import{readdirSync,statSync,unlinkSync,existsSync,readFileSync,watch,rmSync}from'fs';import _0x396b99 from'yargs';function _0x8c62(_0x1f6cae,_0x22373a){const _0x351723=_0x3517();return _0x8c62=function(_0x8c628,_0x300523){_0x8c628=_0x8c628-0x9a;let _0x3c3644=_0x351723[_0x8c628];return _0x3c3644;},_0x8c62(_0x1f6cae,_0x22373a);}import{spawn}from'child_process';import _0x3c5ca1 from'lodash';import _0x3b47f4 from'chalk';import _0x105324 from'syntax-error';import{tmpdir}from'os';import{format}from'util';import{makeWASocket,protoType,serialize}from'./lib/simple.js';import{Low,JSONFile}from'lowdb';import _0x2afbf2 from'pino';import{mongoDB,mongoDBV2}from'./lib/mongoDB.js';import _0x36eefa from'./lib/store.js';const {DisconnectReason,useMultiFileAuthState}=await import(_0x1d9ed3(0xe2)),{CONNECTING}=_0xef0b57,{chain}=_0x3c5ca1,PORT=process[_0x1d9ed3(0xb4)][_0x1d9ed3(0xea)]||process['env'][_0x1d9ed3(0xb1)]||0xbb8;protoType(),serialize(),global[_0x1d9ed3(0xc8)]=function filename(_0x4f0b3b=import.meta[_0x1d9ed3(0xdf)],_0x46ce3b=platform!==_0x1d9ed3(0xaf)){const _0x4506ca=_0x1d9ed3;return _0x46ce3b?/file:\/\/\//['test'](_0x4f0b3b)?fileURLToPath(_0x4f0b3b):_0x4f0b3b:pathToFileURL(_0x4f0b3b)[_0x4506ca(0xa6)]();},global['__dirname']=function dirname(_0xde638b){const _0x4d1c2a=_0x1d9ed3;return _0x18853e['dirname'](global[_0x4d1c2a(0xc8)](_0xde638b,!![]));},global['__require']=function require(_0x3b1a7e=import.meta['url']){return createRequire(_0x3b1a7e);},global[_0x1d9ed3(0x101)]=(_0x1cc7f7,_0x38ed3c='/',_0x152e47={},_0x2f93db)=>(_0x1cc7f7 in global[_0x1d9ed3(0xc3)]?global[_0x1d9ed3(0xc3)][_0x1cc7f7]:_0x1cc7f7)+_0x38ed3c+(_0x152e47||_0x2f93db?'?'+new URLSearchParams(Object[_0x1d9ed3(0xed)]({..._0x152e47,..._0x2f93db?{[_0x2f93db]:global[_0x1d9ed3(0xeb)][_0x1cc7f7 in global[_0x1d9ed3(0xc3)]?global[_0x1d9ed3(0xc3)][_0x1cc7f7]:_0x1cc7f7]}:{}})):''),global[_0x1d9ed3(0xd0)]={'start':new Date()};const __dirname=global[_0x1d9ed3(0xb8)](import.meta[_0x1d9ed3(0xdf)]);global[_0x1d9ed3(0xe7)]=new Object(_0x396b99(process['argv'][_0x1d9ed3(0x9a)](0x2))[_0x1d9ed3(0x11b)](![])[_0x1d9ed3(0xba)]()),global[_0x1d9ed3(0xee)]=new RegExp('^['+(opts[_0x1d9ed3(0xee)]||_0x1d9ed3(0xef))[_0x1d9ed3(0x115)](/[|\\{}()[\]^$+*?.\-\^]/g,_0x1d9ed3(0xf7))+']'),global[_0x1d9ed3(0xe7)]['db']='mongodb+srv://GURU:GURU@gurubot.jtn3ih5.mongodb.net/?retryWrites=true&w=majority',global['db']=new Low(/https?:\/\//[_0x1d9ed3(0xa8)](opts['db']||'')?new cloudDBAdapter(opts['db']):/mongodb(\+srv)?:\/\//i[_0x1d9ed3(0xa8)](opts['db'])?opts[_0x1d9ed3(0xca)]?new mongoDBV2(opts['db']):new mongoDB(opts['db']):new JSONFile((opts['_'][0x0]?opts['_'][0x0]+'_':'')+_0x1d9ed3(0xc7))),global['DATABASE']=global['db'],global[_0x1d9ed3(0xbb)]=async function loadDatabase(){const _0x211981=_0x1d9ed3;if(global['db'][_0x211981(0x113)])return new Promise(_0x4772f9=>setInterval(async function(){const _0x432a9c=_0x211981;!global['db']['READ']&&(clearInterval(this),_0x4772f9(global['db'][_0x432a9c(0xfc)]==null?global[_0x432a9c(0xbb)]():global['db'][_0x432a9c(0xfc)]));},0x1*0x3e8));if(global['db'][_0x211981(0xfc)]!==null)return;global['db']['READ']=!![],await global['db'][_0x211981(0xa7)]()['catch'](console[_0x211981(0xad)]),global['db']['READ']=null,global['db'][_0x211981(0xfc)]={'users':{},'chats':{},'stats':{},'msgs':{},'sticker':{},'settings':{},...global['db'][_0x211981(0xfc)]||{}},global['db'][_0x211981(0xb2)]=chain(global['db'][_0x211981(0xfc)]);},loadDatabase(),global['authFile']=(opts['_'][0x0]||'guru')+_0x1d9ed3(0x11c);const {state,saveState}=_0x36eefa[_0x1d9ed3(0xd9)](global[_0x1d9ed3(0xa0)]),connectionOptions={'printQRInTerminal':!![],'auth':state,'logger':_0x2afbf2({'level':_0x1d9ed3(0xe9)}),'browser':[_0x1d9ed3(0xd8),_0x1d9ed3(0xc5),_0x1d9ed3(0xce)]};global[_0x1d9ed3(0xb3)]=makeWASocket(connectionOptions),conn[_0x1d9ed3(0xf3)]=![];!opts[_0x1d9ed3(0xa8)]&&setInterval(async()=>{const _0xc43630=_0x1d9ed3;if(global['db'][_0xc43630(0xfc)])await global['db']['write']()['catch'](console[_0xc43630(0xad)]);if(opts[_0xc43630(0x102)])try{clearTmp();}catch(_0x148526){console[_0xc43630(0xad)](_0x148526);}},0x3c*0x3e8);if(opts[_0x1d9ed3(0xaa)])(await import(_0x1d9ed3(0xec)))[_0x1d9ed3(0xdc)](global[_0x1d9ed3(0xb3)],PORT);async function clearTmp(){const _0x180751=_0x1d9ed3,_0x547897=[tmpdir(),join(__dirname,_0x180751(0xc4))],_0x564f51=[];return _0x547897['forEach'](_0x1df75a=>readdirSync(_0x1df75a)[_0x180751(0xd6)](_0x4aeed5=>_0x564f51['push'](join(_0x1df75a,_0x4aeed5)))),_0x564f51[_0x180751(0xf0)](_0x16f952=>{const _0x15a223=_0x180751,_0x2f1a17=statSync(_0x16f952);if(_0x2f1a17['isFile']()&&Date[_0x15a223(0xa3)]()-_0x2f1a17[_0x15a223(0xf2)]>=0x3e8*0x3c*0x1)return unlinkSync(_0x16f952);return![];});}setInterval(async()=>{const _0x5af2dc=_0x1d9ed3;var _0x55ad8c=await clearTmp();console[_0x5af2dc(0x112)](_0x3b47f4[_0x5af2dc(0x9c)](_0x5af2dc(0x9d)));},0xea60);async function connectionUpdate(_0x246117){const _0x3ae6a6=_0x1d9ed3,{connection:_0x33ccb5,lastDisconnect:_0x423bae,isNewLogin:_0x263e5d}=_0x246117;if(_0x263e5d)conn[_0x3ae6a6(0xf3)]=!![];const _0x5b3c08=_0x423bae?.[_0x3ae6a6(0xad)]?.[_0x3ae6a6(0xae)]?.[_0x3ae6a6(0xb7)]||_0x423bae?.['error']?.['output']?.[_0x3ae6a6(0xd7)]?.[_0x3ae6a6(0xb7)];_0x5b3c08&&_0x5b3c08!==DisconnectReason[_0x3ae6a6(0xdd)]&&conn?.['ws']['readyState']!==CONNECTING&&(console[_0x3ae6a6(0x112)](await global[_0x3ae6a6(0xc2)](!![])['catch'](console[_0x3ae6a6(0xad)])),global['timestamp'][_0x3ae6a6(0xe4)]=new Date());if(global['db'][_0x3ae6a6(0xfc)]==null)loadDatabase();}function _0x3517(){const _0x477109=['1.0.0','298000jrVPqT','timestamp','syntax\x20error\x20while\x20loading\x20\x27','?update=','convert','module','ffmpeg','forEach','payload','GURU-BOT','useSingleFileAuthState','6648nqGPnE','find','default','loggedOut','creds.update','url','support','sSubject','@adiwajshing/baileys','NODE_TLS_REJECT_UNAUTHORIZED','connect','credsUpdate','message.delete','opts','\x20updated\x20plugin\x20-\x20\x27','silent','PORT','APIKeys','./server.js','entries','prefix','‎z/i!#$%+£¢€¥^°=¶∆×÷π√✓©®:;?&.,\x5c-','map','catch','mtimeMs','isInit','plugins','-loglevel','Goodbye\x20@user','\x5c$&','localeCompare','-frames:v','6072860AsuwFD','then','data','6GfjEgA','groupsUpdate','Group\x20link\x20changed\x20\x0a@revoke','Group\x20icon\x20changed','API','autocleartmp','warn','3809561aTluID','ffprobe','Quick\x20Test\x20Done','participantsUpdate','11jYhJmu','8PTknId','12141080OzCINW','ffmpegWebp','onDelete','Group\x20subject\x20cchanged\x20\x0a@group','color','sIcon','Group\x20description\x20changed\x20\x0a@desc','@user\x20demoted','log','READ','sRevoke','replace','sdemote','uncaughtException','3445RCMFcZ','messages.upsert','8575029AgixAB','exitProcess','.data.json','info','slice','group-participants.update','cyan','✅\x20\x20Auto\x20clear\x20\x20|\x20\x20tmp\x20folder\x20cleared','Hello,\x20@user\x0aWelcome\x20to\x20@group','removeAllListeners','authFile','./plugins/index','bind','now','groups.update','Please\x20install\x20ffmpeg\x20for\x20sending\x20videos\x20(pkg\x20install\x20ffmpeg)','toString','read','test','close','server','keys','-filter_complex','error','output','win32','deleted\x20plugin\x20-\x20\x27','SERVER_PORT','chain','conn','env','./handler.js?update=','logger','statusCode','__dirname','--version','parse','loadDatabase','race','magick','filter','connectionUpdate','off','freeze','reloadHandler','APIs','./tmp','Safari','handler','database.json','__filename','-hide_banner','mongodbv2','1190523wsdYaG','reload','connection.update'];_0x3517=function(){return _0x477109;};return _0x3517();}process['on'](_0x1d9ed3(0x117),console[_0x1d9ed3(0xad)]);let isInit=!![],handler=await import('./handler.js');global[_0x1d9ed3(0xc2)]=async function(_0x20be7d){const _0x2b47be=_0x1d9ed3;try{const _0x2e08b5=await import(_0x2b47be(0xb5)+Date['now']())['catch'](console[_0x2b47be(0xad)]);if(Object['keys'](_0x2e08b5||{})['length'])handler=_0x2e08b5;}catch(_0x32dd32){console[_0x2b47be(0xad)](_0x32dd32);}if(_0x20be7d){const _0x16de06=global[_0x2b47be(0xb3)]['chats'];try{global[_0x2b47be(0xb3)]['ws'][_0x2b47be(0xa9)]();}catch{}conn['ev'][_0x2b47be(0x9f)](),global[_0x2b47be(0xb3)]=makeWASocket(connectionOptions,{'chats':_0x16de06}),isInit=!![];}return!isInit&&(conn['ev'][_0x2b47be(0xc0)](_0x2b47be(0x119),conn[_0x2b47be(0xc6)]),conn['ev']['off'](_0x2b47be(0x9b),conn[_0x2b47be(0x107)]),conn['ev'][_0x2b47be(0xc0)](_0x2b47be(0xa4),conn[_0x2b47be(0xfe)]),conn['ev']['off'](_0x2b47be(0xe6),conn[_0x2b47be(0x10c)]),conn['ev'][_0x2b47be(0xc0)](_0x2b47be(0xcd),conn[_0x2b47be(0xbf)]),conn['ev']['off'](_0x2b47be(0xde),conn[_0x2b47be(0xe5)])),conn['welcome']=_0x2b47be(0x9e),conn['bye']=_0x2b47be(0xf6),conn['spromote']='@user\x20now\x20admin',conn[_0x2b47be(0x116)]=_0x2b47be(0x111),conn['sDesc']=_0x2b47be(0x110),conn[_0x2b47be(0xe1)]=_0x2b47be(0x10d),conn[_0x2b47be(0x10f)]=_0x2b47be(0x100),conn[_0x2b47be(0x114)]=_0x2b47be(0xff),conn[_0x2b47be(0xc6)]=handler['handler']['bind'](global['conn']),conn[_0x2b47be(0x107)]=handler[_0x2b47be(0x107)][_0x2b47be(0xa2)](global[_0x2b47be(0xb3)]),conn['groupsUpdate']=handler['groupsUpdate'][_0x2b47be(0xa2)](global[_0x2b47be(0xb3)]),conn[_0x2b47be(0x10c)]=handler['deleteUpdate']['bind'](global['conn']),conn[_0x2b47be(0xbf)]=connectionUpdate[_0x2b47be(0xa2)](global[_0x2b47be(0xb3)]),conn[_0x2b47be(0xe5)]=saveState[_0x2b47be(0xa2)](global[_0x2b47be(0xb3)],!![]),conn['ev']['on'](_0x2b47be(0x119),conn[_0x2b47be(0xc6)]),conn['ev']['on'](_0x2b47be(0x9b),conn[_0x2b47be(0x107)]),conn['ev']['on'](_0x2b47be(0xa4),conn[_0x2b47be(0xfe)]),conn['ev']['on']('message.delete',conn[_0x2b47be(0x10c)]),conn['ev']['on'](_0x2b47be(0xcd),conn[_0x2b47be(0xbf)]),conn['ev']['on'](_0x2b47be(0xde),conn[_0x2b47be(0xe5)]),isInit=![],!![];};const pluginFolder=global[_0x1d9ed3(0xb8)](join(__dirname,_0x1d9ed3(0xa1))),pluginFilter=_0x354304=>/\.js$/[_0x1d9ed3(0xa8)](_0x354304);global['plugins']={};async function filesInit(){const _0x307b03=_0x1d9ed3;for(let _0xafae68 of readdirSync(pluginFolder)[_0x307b03(0xbe)](pluginFilter)){try{let _0x338850=global[_0x307b03(0xc8)](join(pluginFolder,_0xafae68));const _0x54e114=await import(_0x338850);global['plugins'][_0xafae68]=_0x54e114[_0x307b03(0xdc)]||_0x54e114;}catch(_0x169134){conn[_0x307b03(0xb6)][_0x307b03(0xad)](_0x169134),delete global[_0x307b03(0xf4)][_0xafae68];}}}filesInit()[_0x1d9ed3(0xfb)](_0x5eca71=>console[_0x1d9ed3(0x112)](Object[_0x1d9ed3(0xab)](global['plugins'])))[_0x1d9ed3(0xf1)](console[_0x1d9ed3(0xad)]),global['reload']=async(_0x396ce9,_0x40bde1)=>{const _0x2939bc=_0x1d9ed3;if(pluginFilter(_0x40bde1)){let _0xba606c=global[_0x2939bc(0xc8)](join(pluginFolder,_0x40bde1),!![]);if(_0x40bde1 in global[_0x2939bc(0xf4)]){if(existsSync(_0xba606c))conn[_0x2939bc(0xb6)]['info'](_0x2939bc(0xe8)+_0x40bde1+'\x27');else return conn['logger'][_0x2939bc(0x103)](_0x2939bc(0xb0)+_0x40bde1+'\x27'),delete global[_0x2939bc(0xf4)][_0x40bde1];}else conn[_0x2939bc(0xb6)][_0x2939bc(0x11d)]('new\x20plugin\x20-\x20\x27'+_0x40bde1+'\x27');let _0x86da53=_0x105324(readFileSync(_0xba606c),_0x40bde1,{'sourceType':_0x2939bc(0xd4),'allowAwaitOutsideFunction':!![]});if(_0x86da53)conn[_0x2939bc(0xb6)][_0x2939bc(0xad)](_0x2939bc(0xd1)+_0x40bde1+'\x27\x0a'+format(_0x86da53));else try{const _0x2a7675=await import(global[_0x2939bc(0xc8)](_0xba606c)+_0x2939bc(0xd2)+Date['now']());global[_0x2939bc(0xf4)][_0x40bde1]=_0x2a7675[_0x2939bc(0xdc)]||_0x2a7675;}catch(_0x3da699){conn[_0x2939bc(0xb6)][_0x2939bc(0xad)]('error\x20require\x20plugin\x20\x27'+_0x40bde1+'\x0a'+format(_0x3da699)+'\x27');}finally{global[_0x2939bc(0xf4)]=Object['fromEntries'](Object[_0x2939bc(0xed)](global[_0x2939bc(0xf4)])['sort'](([_0x421f5f],[_0x7ab77c])=>_0x421f5f[_0x2939bc(0xf8)](_0x7ab77c)));}}},Object[_0x1d9ed3(0xc1)](global[_0x1d9ed3(0xcc)]),watch(pluginFolder,global['reload']),await global[_0x1d9ed3(0xc2)]();async function _quickTest(){const _0x4205e3=_0x1d9ed3;let _0x1e37f3=await Promise['all']([spawn(_0x4205e3(0xd5)),spawn(_0x4205e3(0x105)),spawn('ffmpeg',[_0x4205e3(0xc9),_0x4205e3(0xf5),_0x4205e3(0xad),_0x4205e3(0xac),_0x4205e3(0x10e),_0x4205e3(0xf9),'1','-f','webp','-']),spawn('convert'),spawn(_0x4205e3(0xbd)),spawn('gm'),spawn(_0x4205e3(0xdb),[_0x4205e3(0xb9)])]['map'](_0x45db22=>{const _0x4f5b5d=_0x4205e3;return Promise[_0x4f5b5d(0xbc)]([new Promise(_0x207221=>{const _0x42c266=_0x4f5b5d;_0x45db22['on'](_0x42c266(0xa9),_0xe1b374=>{_0x207221(_0xe1b374!==0x7f);});}),new Promise(_0x28cd78=>{const _0x4e7a02=_0x4f5b5d;_0x45db22['on'](_0x4e7a02(0xad),_0x46902f=>_0x28cd78(![]));})]);})),[_0x56acd8,_0x4a9368,_0xb1fb87,_0x10df07,_0x4e57a8,_0x53f0a6,_0x2630b9]=_0x1e37f3;console[_0x4205e3(0x112)](_0x1e37f3);let _0x1f30b4=global[_0x4205e3(0xe0)]={'ffmpeg':_0x56acd8,'ffprobe':_0x4a9368,'ffmpegWebp':_0xb1fb87,'convert':_0x10df07,'magick':_0x4e57a8,'gm':_0x53f0a6,'find':_0x2630b9};Object[_0x4205e3(0xc1)](global[_0x4205e3(0xe0)]);if(!_0x1f30b4[_0x4205e3(0xd5)])conn[_0x4205e3(0xb6)]['warn'](_0x4205e3(0xa5));if(_0x1f30b4[_0x4205e3(0xd5)]&&!_0x1f30b4[_0x4205e3(0x10b)])conn['logger'][_0x4205e3(0x103)]('Stickers\x20may\x20not\x20animated\x20without\x20libwebp\x20on\x20ffmpeg\x20(--enable-ibwebp\x20while\x20compiling\x20ffmpeg)');if(!_0x1f30b4[_0x4205e3(0xd3)]&&!_0x1f30b4[_0x4205e3(0xbd)]&&!_0x1f30b4['gm'])conn[_0x4205e3(0xb6)][_0x4205e3(0x103)]('Stickers\x20may\x20not\x20work\x20without\x20imagemagick\x20if\x20libwebp\x20on\x20ffmpeg\x20doesnt\x20isntalled\x20(pkg\x20install\x20imagemagick)');}_quickTest()[_0x1d9ed3(0xfb)](()=>conn[_0x1d9ed3(0xb6)][_0x1d9ed3(0x11d)](_0x1d9ed3(0x106)))[_0x1d9ed3(0xf1)](console[_0x1d9ed3(0xad)]);
